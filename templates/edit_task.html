<!doctype html>
<html>
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Edit Task</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='edit.css') }}">
</head>
<body>
  <main class="container">
    <div class="edit-container edit-task">
    <h2>Edit Task</h2>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% for c,m in messages %}<p class="{{ c }}">{{ m }}</p>{% endfor %}
    {% endwith %}
    <form method="POST" class="edit-form">
      <label>Name</label><input name="name" value="{{ task.name }}" required>
      <label>Description</label><textarea name="description">{{ task.description }}</textarea>
      <label>Assign To</label>
      <select name="assigned_to">
        <option value="">-- none --</option>
        {% for m in members %}
          <option value="{{ m.id }}" {% if task.assigned_to == m.id %}selected{% endif %}>{{ m.username }}</option>
        {% endfor %}
      </select>
      <label>Comments</label><textarea name="comments">{{ task.comments }}</textarea>
      <label>Due Date</label><input name="due_date" value="{{ task.due_date.strftime('%Y-%m-%dT%H:%M') if task.due_date else '' }}">
      <label>Progress %</label>
      <input type="range" name="progress_percent" min="0" max="100"
        value="{{ task.progress_percent or 0 }}" oninput="this.nextElementSibling.innerText=this.value+'%'">
      <span>{{ task.progress_percent or 0 }}%</span>
      <button type="submit">Save</button>
    </form>
    <p class="bottom-text"><a href="{{ url_for('board_view', board_id=task.board_id) }}">Back to Board</a></p>
    </div>
  </main>
</body>
</html>
